<div class="p-2 sm:p-4">
  <h2
    class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-semibold p-2 text-center"
  >
    Career Opportunities at Sadhguru Tiles
  </h2>
  <p
    class="text-base sm:text-lg md:text-2xl lg:text-3xl font-semibold p-2 text-center"
  >
    Join Our Team
  </p>
  <p class="text-xs sm:text-sm md:text-base lg:text-lg p-1 text-center">
    We're always looking for talented individuals to join our growing team at
    our location in Lohagaon, Pune. Check out our current openings below.
  </p>
  <div class="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    @for(job of jobs; track job){
    <div
      class="m-2 p-4 bg-white rounded-lg shadow-xl border border-gray-200 hover:scale-95 transition-all duration-300 ease-in-out cursor-pointer flex flex-col"
    >
      <div>
        <div class="flex flex-row justify-between items-center">
          <h2
            class="text-base sm:text-lg md:text-2xl lg:text-3xl font-semibold"
          >
            {{ job.title }}
          </h2>
          <p
            class="bg-blue-200 p-1 rounded-lg text-xs sm:text-xs md:text-sm lg:text-base"
          >
            Full-time
          </p>
        </div>
        <p class="mt-2 p-1 text-xs sm:text-xs md:text-sm lg:text-base">
          {{ job.adShor }}
        </p>
        <p class="p-1 text-xs sm:text-xs md:text-sm lg:text-base">
          {{ job.shortDes }}
        </p>
      </div>
      <div class="bg-gray-100 rounded-lg p-3 sm:p-4 mt-4">
        <h3
          class="text-sm sm:text-base md:text-lg lg:text-2xl font-semibold text-black"
        >
          Requirements
        </h3>
        <p class="text-gray-800 text-xs sm:text-sm md:text-base">
          {{ job.reqdes }}
        </p>
      </div>
      <button
        (click)="openModal(job)"
        class="text-xs sm:text-xs md:text-base lg:text-lg font-semibold bg-blue-600 p-2 sm:p-3 rounded-lg mt-4 text-white cursor-pointer hover:bg-blue-400 duration-300 ease-in hover:scale-110"
      >
        Apply Now
      </button>
    </div>
    }
  </div>
  <div
    class="m-2 sm:m-4 mt-8 sm:mt-12 p-4 sm:p-6 bg-white rounded-lg shadow-xl border border-gray-200"
  >
    <h3
      class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-semibold text-black mb-4"
    >
      Locations
    </h3>
    <p class="text-gray-800 text-xs sm:text-base md:text-lg lg:text-xl">
      Sr.No. 1/3, Yojna Nagar,<br />
      near HP Petrol Pump,<br />
      Wagholi-Lohagaon Road,<br />
      (Lohagaon) Pune-411047<br />
    </p>
  </div>
</div>

<ng-template #jobModal let-selectedJob="job">
  <!-- Overlay -->
  <div
    class="fixed inset-0 z-40 bg-black opacity-50 backdrop-blur-sm"
    (click)="closeModal()"
  ></div>
  <div
    class="fixed z-50 inset-0 flex items-center justify-center px-2 sm:px-4 py-6 overflow-auto"
  >
    <div
      class="bg-white rounded-lg shadow-lg w-full max-w-xs sm:max-w-md md:max-w-lg p-4 sm:p-6 relative"
    >
      <h2 class="text-lg sm:text-2xl font-bold mb-4 text-center">
        Apply for {{ selectedJob.title }}
      </h2>
      <div class="mb-3">
        <p class="text-gray-700 text-xs sm:text-sm md:text-base">
          <strong>Location:</strong> {{ selectedJob.adShor }}
        </p>
        <p class="text-gray-700 text-xs sm:text-sm md:text-base">
          <strong>Description:</strong> {{ selectedJob.shortDes }}
        </p>
        <p class="text-gray-700 text-xs sm:text-sm md:text-base">
          <strong>Requirements:</strong> {{ selectedJob.reqdes }}
        </p>
      </div>
      <form
        (submit)="submitApplication($event, selectedJob)"
        class="space-y-3 sm:space-y-4"
      >
        <input
          type="text"
          name="name"
          placeholder="Full Name"
          class="w-full px-3 py-2 border border-gray-300 rounded text-xs sm:text-sm"
          required
        />
        <input
          type="email"
          name="email"
          placeholder="Email Address"
          class="w-full px-3 py-2 border border-gray-300 rounded text-xs sm:text-sm"
          required
        />
        <input
          type="tel"
          name="phone"
          placeholder="Phone Number"
          class="w-full px-3 py-2 border border-gray-300 rounded text-xs sm:text-sm"
          required
        />
        <input
          type="number"
          name="experience"
          placeholder="Years of Experience"
          class="w-full px-3 py-2 border border-gray-300 rounded text-xs sm:text-sm"
          min="0"
          required
        />
        <input
          type="date"
          name="joining"
          placeholder="Preferred Joining Date"
          class="w-full px-3 py-2 border border-gray-300 rounded text-xs sm:text-sm"
        />
        <textarea
          name="message"
          rows="3"
          placeholder="Cover Letter / Message"
          class="w-full px-3 py-2 border border-gray-300 rounded resize-none text-xs sm:text-sm"
        ></textarea>

        <div
          class="flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3"
        >
          <button
            type="button"
            (click)="closeModal()"
            class="bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded text-xs sm:text-sm"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-xs sm:text-sm"
          >
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
</ng-template>

<!-- Render Modal -->
<ng-container *ngIf="isModalOpen">
  <ng-container
    *ngTemplateOutlet="jobModal; context: { job: selectedJob }"
  ></ng-container>
</ng-container>

